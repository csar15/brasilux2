package  {	import flash.display.DisplayObject;
	import flash.display.MovieClip;
	import flash.display.Shape;
	import flash.events.MouseEvent;	public class Mascara extends MovieClip {				//public var stage:Stage		public var main:Main		public var positions:Array = new Array()		public var i:Number = 0;		public var id:Number		public var colorname:String		public var colorcod:String		public var hexacolor:String		public var firstclick:Boolean = false;		public var mc:MovieClip;		public var canvas_mc:MovieClip = new MovieClip()		public var dot:Dot		private var graf:Shape = new Shape()		public function Mascara(W:Number, H:Number) { 						var grafWidth:Number = W			var grafHeight:Number = H			graf.graphics.beginFill(0xffffff, 0.0);            graf.graphics.drawRect(0, 0, grafWidth, grafHeight);            graf.graphics.endFill();            addChild(graf);						this.addEventListener(MouseEvent.MOUSE_DOWN, MousePress)			this.addEventListener(MouseEvent.MOUSE_UP, MouseRelease)			addChild(canvas_mc)							}		private function MousePress(e:MouseEvent):void {			//trace(firstclick)			canvas_mc.graphics.lineStyle(0,0xFF0000,100);					if (firstclick == false) {				canvas_mc.graphics.moveTo(mouseX, mouseY);			} else {				var randomColor:String = "0xFF0000";				canvas_mc.graphics.moveTo(dot.x,dot.y);					}			i++;		};		private function MouseRelease(e:MouseEvent):void {			PointDot()					};		private function PointDot():void {			dot = new Dot()			dot.name = "dot"+i			canvas_mc.addChild(dot);			dot.x = mouseX;			dot.y = mouseY;			canvas_mc.graphics.lineTo(mouseX,mouseY);			positions.push(dot);			if (firstclick == false) {				//			} else {				checkPoint();			}			firstclick = true;			}		private function checkPoint():void {			var canvas_dot:DisplayObject = canvas_mc.getChildByName("dot"+1);			if (dot.hitTestObject(canvas_dot)) {				makeForm();			}		}		public function makeForm():void {			canvas_mc.graphics.clear();						for (var j:Number=0; j<i; j++) {				canvas_mc.getChildAt(j).visible = false				//canvas_mc.removeChildAt(j)			}						var n:Number = 0;			canvas_mc.graphics.beginFill(0xffffff,0.1);			canvas_mc.graphics.moveTo(positions[n].x,positions[n].y);			for (var w:Number=1; w<positions.length; w++) {				n++;				canvas_mc.graphics.lineTo(positions[n].x,positions[n].y);			}			canvas_mc.graphics.endFill();			this.removeEventListener(MouseEvent.MOUSE_DOWN, MousePress)			this.removeEventListener(MouseEvent.MOUSE_UP, MouseRelease)						removeChild(graf);			main.EndForm()		}	}	}